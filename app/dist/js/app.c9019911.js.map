{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?8d58","webpack:///./src/components/Scene.vue?5e6f","webpack:///./src/components/Description.vue?4099","webpack:///./src/assets/atmosphere/very-low-note-by-kevin-macleod-from-filmmusic-io.mp3","webpack:///./src/components/Commander.vue?c227","webpack:///./src/pages/IntroPage.vue?6239","webpack:///./src/pages/CreditsPage.vue?a639","webpack:///./src/assets/jordan-grimmer-sewer3fla23.jpg","webpack:///./src/components/PushDrawer.vue?44d5","webpack:///./src/App.vue","webpack:///./src/sound.js","webpack:///./src/tea/World.js","webpack:///./src/tea/utilities/CmdParser.js","webpack:///./src/tea/utilities/uuid.js","webpack:///./src/tea/initials.js","webpack:///./src/tea/Thing.js","webpack:///./src/tea/prefabs/actions.js","webpack:///./src/tea/prefabs/doorPrefab.js","webpack:///./src/tea/prefabs/itemPrefab.js","webpack:///./src/tea/prefabs/keyPrefab.js","webpack:///./src/tea/prefabs/lightSwitchPrefab.js","webpack:///./src/tea/prefabs/eventPrefab.js","webpack:///./src/game/index.js","webpack:///./src/store.js","webpack:///./src/App.vue?97f5","webpack:///./src/pages/NotFoundPage.vue","webpack:///./src/pages/NotFoundPage.vue?0ac5","webpack:///./src/pages/IntroPage.vue","webpack:///./src/pages/IntroPage.vue?1d8d","webpack:///./src/pages/CreditsPage.vue","webpack:///./src/pages/CreditsPage.vue?3caa","webpack:///./src/pages/MenuPage.vue","webpack:///./src/pages/MenuPage.vue?d378","webpack:///./src/pages/GamePage.vue","webpack:///./src/components/PushDrawer.vue","webpack:///./src/components/PushDrawer.vue?40ce","webpack:///./src/components/Scene.vue","webpack:///./src/components/Description.vue","webpack:///./src/components/Description.vue?dd47","webpack:///./src/components/Scene.vue?86e3","webpack:///./src/components/Commander.vue","webpack:///./src/components/Commander.vue?900d","webpack:///./src/components/Response.vue","webpack:///./src/components/Response.vue?4778","webpack:///./src/pages/GamePage.vue?ad48","webpack:///./src/pages/ComputerPage.vue","webpack:///./src/pages/ComputerPage.vue?270c","webpack:///./src/main.js","webpack:///./src/assets/kenny_rpg/metalClick.ogg","webpack:///./src/assets/jordan-grimmer-office2.jpg","webpack:///./src/assets/amr-logo-mini.svg","webpack:///./src/assets/jordan-grimmer-resirealistic4flat2.jpg","webpack:///./src/assets/atmosphere/anxiety-by-kevin-macleod-from-filmmusic-io.mp3","webpack:///./src/assets/kenny_rpg/doorClose_2.ogg","webpack:///./src/assets/jordan-grimmer-untitledresinew3.jpg","webpack:///./src/components/Response.vue?24e4","webpack:///./src/assets/jordan-grimmer-untitledress2.jpg","webpack:///./src/pages/ComputerPage.vue?feae","webpack:///./src/pages/GamePage.vue?e762","webpack:///./src/assets/kenny_rpg/handleSmallLeather2.ogg"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","HowlerChannel","options","initial","volume","preload","autoplay","muted","rate","fadeDuration","this","tracks","track","Howl","playing","on","pos","keys","filter","getTrack","play","duration","fade","toKey","idx","to","map","fadeOut","fadeIn","optionKeys","opt","updateTracks","atmospheres","addTrack","src","require","loop","effects","World","player","locations","location","characters","things","lexicon","lastTryCmd","preHook","postHook","character","getCharacter","Error","getLocation","thing","world","find","str","locationAttempt","tryAnd","playerAttempt","cmdParser","input","original","toLowerCase","replace","doc","nlp","normalize","verbs","match","parts","clone","splitAfter","out","mainPart","otherPart","actOn","first","text","actWith","nouns","action","includes","terms","json","results","uuid","cryptoObj","crypto","msCrypto","full","getRandomValues","Uint8Array","toString","substr","initialProps","details","default","descriptions","initialActs","examine","prefab","sub","stateKey","describe","help","initialErrs","empty","noThingSimple","noun","noAction","noNoun","multiMatch","join","initialSubs","fullname","actionList","Thing","props","actions","subs","errs","parentKey","description","detail","findThing","worldThings","findIndex","parent","word","getThings","cb","command","parsed","parse","type","res","actOnThings","findThings","actWithThings","singleTxt","singleAct","getAction","callAction","output","event","term","CustomEvent","document","dispatchEvent","toPastTense","take","removeThing","addThing","actionSource","drop","goTo","loc","setLocation","toggleStateKey","off","useOn","targetKey","stateFrom","stateTo","la","pa","infiniAction","toInfinitive","pastAction","actWithName","actOnThing","actWithThing","defaultActs","act","doorPrefab","thingProps","acts","a","addAction","itemPrefab","itemActs","keyPrefab","lightSwitchPrefab","statKey","ops","eventPrefab","setLexicon","open","round","bones","use","fat","climb","upstair","front","light","switch","flip","apartment","office","hallway","sewer","street","officeDoor","door","hallwayDoor","hallwayCorner","sewerCorner","sewerExit","streetDoor","unlocked","locked","streetExit","apartmentExit","computer","eventTrigger","item","inventory","dropped","horror","vial","hallwayLight","lightSwitch","smallKey","addLocation","addCharacter","setPlayer","store","debug","app","game","reactive","state","response","more","view","lights","scenes","bg","atmosphere","singleCommand","attempt","playAtmosphere","scene","current","getPlaying","crossFade","playSimpleSoundEffects","actionButton","label","commandButton","replaceActions","rgx","RegExp","replaceThings","components","computed","listening","watch","methods","handleSingleCommand","handleAttempt","lOnThings","pOnThings","console","log","$forceUpdate","mounted","addEventListener","e","$router","render","__scopeId","handleClick","logo","alt","go","credits","v","copy","assetName","creator","link","href","license","data-theme","aria-hidden","clickCommandButton","left","makeActionButton","activeLocation","commander","toggleView","ref","toggleMore","right","aria-pressed","inventoryOn","setMoreOn","locationsOn","data-command","data-transition","transition","data-open","data-position","position","String","Boolean","data-view","role","data-light","style","listThings","rawHtml","button","Description","undefined","allThings","$root","unhiddenThings","cmd","autocomplete","clearResponse","inputCommand","id","aria-label","$emit","emits","aria-live","aria-atomic","PushDrawer","Scene","Commander","Response","activeUI","triggerEl","moreOn","newVal","handleFocus","$refs","closeMoreEl","element","activeElement","focus","flagName","getFocusables","target","getAttribute","routes","path","component","NotFoundPage","IntroPage","CreditsPage","MenuPage","GamePage","ComputerPage","router","createRouter","history","createWebHistory","createApp","App","mount"],"mappings":"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","file":"js/app.c9019911.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=62b9ce00&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Scene.vue?vue&type=style&index=0&id=b50950a4&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Description.vue?vue&type=style&index=0&id=61dd20ae&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"media/very-low-note-by-kevin-macleod-from-filmmusic-io.aab586b5.mp3\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Commander.vue?vue&type=style&index=0&id=056bc533&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./IntroPage.vue?vue&type=style&index=0&id=1d392406&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CreditsPage.vue?vue&type=style&index=0&id=b356206e&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/jordan-grimmer-sewer3fla23.a289c96b.jpg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PushDrawer.vue?vue&type=style&index=0&id=4c0a6c10&lang=css\"","<template>\r\n  <div class=\"app\">\r\n    <router-view></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n//import annyang from \"annyang\";\r\nimport store from \"./store\";\r\n\r\nconst app = {\r\n  name: \"App\",\r\n  components: {},\r\n  computed: {},\r\n  data: () => ({\r\n    game: store.game,\r\n    state: store.state,\r\n    inventory: store.game.inventory,\r\n    locations: store.game.locations,\r\n    location: store.game.location,\r\n    listening: true,\r\n  }),\r\n  watch: {\r\n    location() {\r\n      store.playAtmosphere(this.location.key);\r\n    },\r\n  },\r\n  methods: {\r\n    handleSingleCommand(locationAttempt) {\r\n      store.singleCommand(locationAttempt);\r\n    },\r\n    handleAttempt(attempt) {\r\n      const la = attempt.locationAttempt;\r\n      const pa = attempt.playerAttempt;\r\n      const lOnThings = la.actOnThings; // location attempt\r\n      const pOnThings = pa.actOnThings; // player attempt\r\n      const action = location.action || pa.action;\r\n\r\n      // thing on player\r\n      if (pOnThings.length === 1 && lOnThings.length === 0) {\r\n        store.playSimpleSoundEffects(action, pOnThings[0]);\r\n        return store.replaceActions(pOnThings[0], pa.res);\r\n      }\r\n      // thing in location\r\n      if (lOnThings.length === 1) {\r\n        store.playSimpleSoundEffects(action, lOnThings[0]);\r\n        return store.replaceActions(lOnThings[0], la.res);\r\n      }\r\n    },\r\n    command(str) {\r\n      const attempt = this.game.command(str);\r\n      const { locationAttempt, playerAttempt } = attempt;\r\n      if (!str && !locationAttempt && !playerAttempt) return null;\r\n      const lOnThings = locationAttempt.actOnThings; // location attempt\r\n      const pOnThings = playerAttempt.actOnThings; // player attempt\r\n      let response = false;\r\n\r\n      // Multiples found\r\n      if (lOnThings.length > 0 && pOnThings.length > 0 && !response) {\r\n        const things = [...lOnThings, ...pOnThings];\r\n        response = store.replaceThings(\r\n          things,\r\n          () =>\r\n            `There is more than one '${lOnThings[0].noun}' available in the ${\r\n              location.name\r\n            } and inventory, please specify; ${things\r\n              .map((i) => i.name)\r\n              .join(\", \")}.`\r\n        );\r\n      }\r\n\r\n      if (lOnThings.length === 1) {\r\n        console.log(locationAttempt);\r\n      }\r\n\r\n      if (locationAttempt.type === \"single\" && !response) {\r\n        response = store.singleCommand(locationAttempt);\r\n      }\r\n\r\n      // no thing in location or on player\r\n      if (locationAttempt.type === \"error\" && playerAttempt.type === \"error\") {\r\n        response = locationAttempt.res() + \" \" + playerAttempt.res();\r\n      }\r\n\r\n      if (!response) {\r\n        response = this.handleAttempt(attempt);\r\n      }\r\n\r\n      store.state.response = response;\r\n\r\n      // update data or reactivity breaks ðŸ¤¢\r\n      [\"inventory\", \"locations\", \"location\"].map((i) => {\r\n        if (this[i]) this[i] = this.game[i];\r\n      });\r\n      this.$forceUpdate(); // just in case\r\n    },\r\n    getLocation(key) {\r\n      return this.game.getLocation(key || this.location.key);\r\n    },\r\n  },\r\n  mounted() {\r\n    store.playAtmosphere(this.location.key);\r\n\r\n    document.addEventListener(\"tea-event\", (e) => {\r\n      const loc = this.location;\r\n      const { prefab } = e.detail;\r\n\r\n      switch (prefab.noun) {\r\n        case \"computer\":\r\n          this.$router.push(\"computer\");\r\n          break;\r\n        case \"switch\":\r\n          console.log(this.state.lights[loc.key]);\r\n          this.state.lights[loc.key] = prefab.stateKey === \"on\" ? true : false;\r\n          console.log(this.state.lights[loc.key]);\r\n          break;\r\n      }\r\n    });\r\n  },\r\n};\r\n\r\nexport default app;\r\n</script>\r\n\r\n<style>\r\nbody {\r\n  min-width: 300px;\r\n}\r\n.app {\r\n  height: 100vh;\r\n}\r\n.menu {\r\n  background: var(--tea-bg-3);\r\n}\r\n</style>\r\n","import { Howl } from 'howler';\r\n\r\n\r\nclass HowlerChannel {\r\n  constructor(options) {\r\n    const initial = { volume: 1.0, preload: true, autoplay: false, muted: false, rate: 1.0, fadeDuration: 2000 }\r\n    this.options = { ...initial, ...options };\r\n    this.tracks = {};\r\n  }\r\n  addTrack(key, options = {}) {\r\n    const track = new Howl({ ...this.options, ...options });\r\n    track.playing = false;\r\n\r\n    track.on('end', () => {\r\n      track.pos(0);\r\n      track.playing = false;\r\n    });\r\n\r\n    track.on('stop', () => {\r\n      track.pos(0);\r\n      track.playing = false;\r\n    });\r\n\r\n    track.on('play', () => track.playing = true);\r\n\r\n    this.tracks[key] = track;\r\n    return this;\r\n  }\r\n  getTrack(key) {\r\n    return this.tracks[key];\r\n  }\r\n  getPlaying() {\r\n    return Object.keys(this.tracks).filter(i => this.tracks[i].playing)\r\n  }\r\n  play(key) {\r\n    const track = this.getTrack(key);\r\n    if (track) {\r\n      track.pos(0).play();\r\n    }\r\n  }\r\n  fadeIn(key, duration = this.options.fadeDuration) {\r\n    const track = this.getTrack(key);\r\n    if (track && !track.playing) {\r\n      this.play(key)\r\n      track.fade(0, this.options.volume, duration);\r\n    }\r\n  }\r\n  fadeOut(key, duration = this.options.fadeDuration) {\r\n    const track = this.getTrack(key);\r\n    if (track && track.playing) {\r\n      track.playing = false;\r\n      track.fade(this.options.volume, 0, duration);\r\n    }\r\n  }\r\n  crossFade(toKey) {\r\n    const playing = Object.keys(this.tracks).filter((i, idx) => this.tracks[i].playing && idx !== toKey);\r\n    const to = this.getTrack(toKey);\r\n    playing.map(i => this.fadeOut(i));\r\n    if (to) this.fadeIn(toKey);\r\n  }\r\n  updateTracks(options = {}) {\r\n    const keys = Object.keys(this.tracks);\r\n    const optionKeys = Object.keys({ ...this.options, ...options });\r\n    keys.map(i => {\r\n      const track = this.tracks[i];\r\n      optionKeys.map(opt => track[opt] = options[opt])\r\n    })\r\n  }\r\n  setVolume(volume) {\r\n    this.volume = volume;\r\n    this.updateTracks({ volume })\r\n  }\r\n}\r\n\r\nconst atmospheres = new HowlerChannel({ volume: .3 });\r\natmospheres.addTrack('dark', { src: require(\"@/assets/atmosphere/very-low-note-by-kevin-macleod-from-filmmusic-io.mp3\"), loop: true })\r\natmospheres.addTrack('anxiety', { src: require(\"@/assets/atmosphere/anxiety-by-kevin-macleod-from-filmmusic-io.mp3\"), loop: true })\r\n\r\nconst effects = new HowlerChannel({ volume: .3 });\r\neffects.addTrack('pickup', { src: require(\"@/assets/kenny_rpg/handleSmallLeather2.ogg\") })\r\neffects.addTrack('door', { src: require(\"@/assets/kenny_rpg/doorClose_2.ogg\") })\r\neffects.addTrack('metalClick', { src: require(\"@/assets/kenny_rpg/metalClick.ogg\") })\r\n\r\nexport {\r\n  atmospheres,\r\n  effects\r\n}","\r\n//import Thing from './Thing'\r\n\r\nclass World {\r\n  constructor() {\r\n    this.player = null;\r\n    this.locations = [];\r\n    this.location = null;\r\n    this.characters = [];\r\n    this.things = [];\r\n    this.lexicon = {};\r\n    this.lastTryCmd = {};\r\n    this.preHook = () => { };\r\n    this.postHook = () => { }\r\n  }\r\n\r\n  get inventory() {\r\n    const player = this.getCharacter();\r\n    return player.things;\r\n  }\r\n\r\n  setLexicon(lexicon) {\r\n    this.lexicon = { ...lexicon };\r\n    return this;\r\n  }\r\n\r\n  setPlayer(key) {\r\n    const character = this.getCharacter(key);\r\n    if (!character) throw Error('Character not found.');\r\n    this.player = character;\r\n  }\r\n\r\n  setLocation(key) {\r\n    const location = this.getLocation(key);\r\n    if (!location) throw Error(`Location with key \"${key}\" not found.`);\r\n    this.location = location;\r\n  }\r\n\r\n  addLocation(thing) {\r\n    thing.world = this;\r\n    this.locations.push(thing);\r\n    if (!this.location && this.locations.length === 1) {\r\n      this.location = thing;\r\n    }\r\n  }\r\n\r\n  getLocation(key = this.location.key) {\r\n    const location = this.locations.find(l => l.key === key);\r\n    return location;\r\n  }\r\n\r\n  addCharacter(thing) {\r\n    thing.world = this;\r\n    this.characters.push(thing)\r\n    if (!this.player && this.characters.length === 1) {\r\n      this.player = thing;\r\n    }\r\n  }\r\n\r\n  getCharacter(key = this.player.key) {\r\n    const character = this.characters.find(c => c.key === key);\r\n    return character;\r\n  }\r\n\r\n  findThing(key) {\r\n    const thing = this.things.find(i => key === i.key);\r\n    const location = this.locations.find(i => key === i.key);\r\n    return thing || location;\r\n  }\r\n\r\n  command(str, lexicon) {\r\n    const location = this.getLocation();\r\n    const locationAttempt = location.tryAnd(str, lexicon || this.lexicon);\r\n    const player = this.getCharacter();\r\n    const playerAttempt = player.tryAnd(str, lexicon || this.lexicon);\r\n\r\n    this.lastTryCmd = {\r\n      locationAttempt,\r\n      playerAttempt\r\n    }\r\n\r\n    return this.lastTryCmd;\r\n\r\n  }\r\n}\r\n\r\nexport default World;","import nlp from \"compromise\";\r\n\r\nfunction cmdParser(input, lexicon = {}) {\r\n  const original = input.toLowerCase().replace(/\\.+$/, \"\");\r\n  const doc = nlp(original, lexicon)\r\n    .normalize({ verbs: true })\r\n    .match(\"(#Verb|#Noun) .?+\");\r\n\r\n  //doc.match(\"(#Noun?|#Adjective?) #Noun\").tag('Fullname');\r\n\r\n  const parts = doc.clone().splitAfter(\"#Verb *?+ #Noun+\").out(\"array\");\r\n  //const parts = doc.clone().splitAfter(\"#Fullname|#Noun\").out(\"array\");\r\n  //console.log({ parts })\r\n  const mainPart = parts[0] || '';\r\n  const otherPart = parts.length > 1 ? parts[1] || '' : \"\";\r\n  const actOn = nlp(mainPart, lexicon)\r\n    .match(\"(#Noun?|#Adjective?)? #Noun\")\r\n    .first()\r\n    .text();\r\n\r\n  const actWith = nlp(otherPart, lexicon)\r\n    .match(\"(#Noun?|#Adjective?)? #Noun\")\r\n    .first()\r\n    .text();\r\n\r\n  const verbs = doc.verbs().out(\"array\");\r\n  const nouns = doc.nouns().out(\"array\");\r\n  const action = verbs.find((i) => !i.includes(\"use\")) || verbs[0] || \"\";\r\n  const text = doc.text();\r\n  const terms = nlp(original, lexicon)\r\n    .normalize({ verbs: true }).json().map(i => i.text)\r\n\r\n  const results = {\r\n    json: doc.json(),\r\n    parts,\r\n    action,\r\n    actOn,\r\n    actWith,\r\n    text,\r\n    verbs,\r\n    nouns,\r\n    terms,\r\n    original\r\n  };\r\n\r\n  return results;\r\n}\r\n\r\nexport default cmdParser;\r\n","/**\r\n * Simple uid generation\r\n * https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\r\n */\r\nconst uuid = (length = 16) => {\r\n  const cryptoObj = window.crypto || window.msCrypto; // for IE 11\r\n  const full = ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\r\n    (c ^ (cryptoObj.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))).toString(length)\r\n  ); /* eslint-disable-line */\r\n  return full.substr(-length, full.length);\r\n};\r\n\r\nexport default uuid;","export const initialProps = () => ({\r\n  details: {\r\n    default: `There is nothing remarkable about the [name]`\r\n  },\r\n  descriptions: {\r\n    default: \"It's a [name]! Better describe it!\"\r\n  }\r\n});\r\n\r\nexport const initialActs = {\r\n  examine: (prefab) => prefab.sub(prefab.p.details[prefab.stateKey] || prefab.p.details.default),\r\n  describe: (prefab) => prefab.sub(prefab.p.descriptions[prefab.stateKey] || prefab.p.descriptions.default),\r\n  help: (prefab) => `The following actions can be used on the ${prefab.name}: ${prefab.sub('[actions]')}`\r\n};\r\n\r\nexport const initialErrs = {\r\n  empty: () => `Please enter something`,\r\n  noThingSimple: (prefab, data) => `There is no '${data.actOn || data.noun}' in the ${prefab.name === 'player' ? 'inventory' : prefab.name}.`,\r\n  noAction: (prefab, data) =>\r\n    prefab.sub(`The '${data.action}' action is not available for the [name].`),\r\n  noNoun: () => \"Commands should have at least a single noun.\",\r\n  multiMatch: (prefab, data) => {\r\n    return `There is more than one '${data.noun}' available, please specify which: ${data.things.map(i => `'${i.name}'`).join(', ')}.`\r\n  }\r\n};\r\n\r\nexport const initialSubs = {\r\n  \"[name]\": (prefab) => prefab.name,\r\n  \"[noun]\": (prefab) => prefab.noun,\r\n  \"[fullname]\": (prefab) => prefab.fullname,\r\n  \"[actions]\": (prefab) => prefab.actionList.join(\", \").replace(/, ([^,]*)$/, \" and $1\")\r\n};\r\n","import cmdParser from \"./utilities/CmdParser\";\r\nimport uuid from \"./utilities/uuid\";\r\nimport {\r\n  initialProps,\r\n  initialActs,\r\n  initialErrs,\r\n  initialSubs\r\n} from \"./initials\";\r\n\r\nclass Thing {\r\n  constructor({\r\n    key = null, // required\r\n    noun = \"\", // required\r\n    fullname = null,\r\n    props = {},\r\n    actions = {},\r\n    stateKey = \"default\",\r\n    subs = {},\r\n    errs = {},\r\n    world = false,\r\n    parentKey = false,\r\n    description = false, // default description\r\n    detail = false, // default detail\r\n    details = false,\r\n    descriptions = false\r\n  }) {\r\n    this.key = key || uuid(6);\r\n    this.noun = noun;\r\n    this.fullname = fullname;\r\n    this.props = { ...initialProps(), ...props };\r\n    this.actions = { ...initialActs, ...actions };\r\n    this.stateKey = stateKey;\r\n    this.errs = { ...initialErrs, errs };\r\n    this.subs = { ...initialSubs, ...subs };\r\n    this.world = world;\r\n    this.parentKey = parentKey;\r\n\r\n    if (descriptions) {\r\n      this.props.descriptions = { ...this.props.descriptions, ...descriptions }\r\n    }\r\n\r\n    if (details) {\r\n      this.props.details = { ...this.props.details, ...details }\r\n    }\r\n\r\n    if (description) {\r\n      this.props.descriptions.default = description;\r\n    }\r\n\r\n    if (detail) {\r\n      this.props.details.default = detail;\r\n    }\r\n  }\r\n\r\n  get parent() {\r\n    return this.world.findThing(this.parentKey);\r\n  }\r\n\r\n  get name() {\r\n    return this.fullname || this.noun || this.key;\r\n  }\r\n\r\n  get actionList() {\r\n    return [...Object.keys(this.actions)];\r\n  }\r\n\r\n  // get thingList() {\r\n  //   return this.getThings().map((i) => i.name);\r\n  // }\r\n  get things() {\r\n    return this.getThings();\r\n  }\r\n\r\n  get p() {\r\n    return this.props;\r\n  }\r\n\r\n  get a() {\r\n    return this.actions\r\n  }\r\n\r\n  get description() {\r\n    return this.sub(this.props.descriptions[this.stateKey]);\r\n  }\r\n\r\n  get detail() {\r\n    return this.sub(this.props.details[this.stateKey]);\r\n  }\r\n\r\n  /**\r\n   * Substitutions used in props, actions and errors\r\n   * @param {String} str \r\n   * @param {Object} subs \r\n   */\r\n  sub(str, subs = this.subs) {\r\n    if (typeof str !== \"string\") return null;\r\n    Object.keys(subs).map((i) => (str = str.replace(i, subs[i](this))));\r\n    return str;\r\n  }\r\n\r\n  removeThing(key) {\r\n    const thing = this.findThing(key);\r\n    if (thing) {\r\n      this.world.things = this.world.things.filter(i => i.key !== thing.key);\r\n    }\r\n    return thing;\r\n  }\r\n\r\n  addThing(thing) {\r\n    if (thing instanceof Thing === false) return null;\r\n    thing.parentKey = this.key;\r\n\r\n    thing.world = this.world;\r\n    const worldThings = this.world.things;\r\n    const idx = worldThings.findIndex(i => i.key === thing.key);\r\n    if (idx > -1) {\r\n      this.world.things[idx] = thing;\r\n      //console.warn(`Attempting to add Thing with duplicate key '${thing.key}'.`)\r\n    } else {\r\n      this.world.things.push(thing);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Finds a thing that is a child of this thing by\r\n   * @param {string} key \r\n   */\r\n  findThing(key) {\r\n    return this.world.things.find(i => i.key === key && i.parent === this.key) || false;\r\n  }\r\n\r\n  findThings(word) {\r\n    const things = this.getThings().filter(i => {\r\n      return [i.fullname, i.noun, i.key].includes(word)\r\n    });\r\n    return things;\r\n  }\r\n\r\n  getThings() {\r\n    return this.world.things.filter(i => i.parentKey === this.key);\r\n  }\r\n\r\n  addAction(key, cb = () => { }) {\r\n    this.actions[key] = cb;\r\n  }\r\n\r\n  getAction(key) {\r\n    return this.actions[key];\r\n  }\r\n\r\n  callAction(key) {\r\n    const cb = this.actions[key];\r\n    if (!cb) return this.errs.noAction(this, { action: key });\r\n    if (typeof cb !== \"function\") return cb;\r\n    const result = cb(this, {}, key);\r\n    return result;\r\n  }\r\n\r\n  parse(command, lexicon = {}) {\r\n    return cmdParser(command, lexicon);\r\n  }\r\n\r\n  tryAnd(command, lexicon = {}) {\r\n    if (!command) return;\r\n    const parsed = this.parse(command, lexicon);\r\n    const { nouns, action, actOn, actWith, terms } = parsed;\r\n\r\n    //console.log({ parsed })\r\n\r\n    let type = \"empty\";\r\n    let res = () => \"unknown\";\r\n\r\n    if (terms && terms.length === 1) type = \"single\";\r\n    if (actOn && action && !actWith) type = \"simple\";\r\n    if (actOn && action && actWith) type = \"complex\";\r\n\r\n    const actOnThings = actOn ? this.findThings(actOn) : false;\r\n    const actWithThings = actWith ? this.findThings(actWith) : false;\r\n\r\n    if (type === 'empty') {\r\n      type = 'error';\r\n      res = () => this.errs.empty();\r\n    }\r\n\r\n    if (type === \"single\") {\r\n      const singleTxt = terms[0];\r\n      const singleAct = this.getAction(singleTxt);\r\n      res = () => this.errs.noAction(this, { action: singleTxt });\r\n      if (singleAct) {\r\n        res = () => this.callAction(singleTxt);\r\n      }\r\n    }\r\n\r\n    if (type === \"simple\" || type === \"complex\") {\r\n      if (actOnThings && actOnThings.length === 0) {\r\n        type = 'error';\r\n        res = () => this.errs.noThingSimple(this, { noun: nouns[0], actOn });\r\n      }\r\n      if (actOnThings && actOnThings.length > 1) {\r\n        type = 'error';\r\n        res = () => this.errs.multiMatch(this, { noun: nouns[0], things: actOnThings })\r\n      }\r\n      if (actOnThings && actOnThings.length === 1) {\r\n        res = () => actOnThings[0].callAction(action);\r\n      }\r\n    }\r\n\r\n    const output = {\r\n      res,\r\n      type,\r\n      actOnThings,\r\n      actWithThings,\r\n      //act,\r\n      ...parsed\r\n    }\r\n\r\n    return output;\r\n  }\r\n}\r\n\r\nexport default Thing;\r\n","import nlp from 'compromise';\r\n\r\nexport const event = (prefab, options = {}, term) => {\r\n  const data = { detail: { prefab, options, term } };\r\n  const event = new CustomEvent('tea-event', data, false);\r\n  document.dispatchEvent(event);\r\n  const action = nlp(term).verbs().toPastTense().text();\r\n  return prefab.sub(`${action || 'used'} [name]`);\r\n}\r\n\r\nexport const take = (prefab, options = {}, term) => {\r\n  const player = prefab.world.player;\r\n  const parent = prefab.parent;\r\n  parent.removeThing(prefab.key);\r\n  player.addThing(prefab);\r\n  prefab.stateKey = \"inventory\";\r\n  const action = nlp(term).verbs().toPastTense().text();\r\n  const res = prefab.sub(`${action || 'taken'} [name] from ${parent.name}`);\r\n  event(prefab, { ...options, actionSource: 'take' }, term);\r\n  return res;\r\n}\r\n\r\nexport const drop = (prefab, options, term) => {\r\n  const player = prefab.world.player;\r\n  const location = prefab.world.location;\r\n  player.removeThing(prefab.key);\r\n  location.addThing(prefab);\r\n  prefab.stateKey = \"dropped\";\r\n  const action = nlp(term).verbs().toPastTense().text();\r\n  const res = prefab.sub(`${action || 'dropped'} [name] from ${parent.name}`);\r\n  event(prefab, { ...options, actionSource: 'drop' }, term);\r\n  return res;\r\n}\r\n\r\nexport const goTo = (prefab, options, term) => {\r\n  const world = prefab.world;\r\n  const loc = world.getLocation(options.goTo);\r\n  let res = false;\r\n  if (!res && !loc) res = 'Unknown location';\r\n  if (!res && prefab.stateKey === 'locked') return prefab.callAction('examine');\r\n  if (!res) {\r\n    world.setLocation(loc.key);\r\n    const action = nlp(term).verbs().toPastTense().text();\r\n    res = prefab.sub(`${action || 'moved'} [name] to ${loc.name}`);\r\n  }\r\n  event(prefab, { ...options, actionSource: 'goTo' }, term);\r\n  return res;\r\n}\r\n\r\nexport const toggleStateKey = (prefab, options, term) => {\r\n  const { on, off } = options\r\n  let key = prefab.stateKey\r\n  key = key === on ? off : on;\r\n  prefab.stateKey = key;\r\n  const action = nlp(term).verbs().toPastTense().text();\r\n  const res = prefab.sub(`${action || 'turned'} [name] ${key}`);\r\n  event(prefab, { ...options, actionSource: 'toggleStateKey' }, term);\r\n  return res;\r\n}\r\n\r\n// the prefab with 'useOn' can act with another prefab to change the other prefabs stateKey\r\nexport function useOn(prefab, options, term) {\r\n  const { location } = prefab.world;\r\n  const { targetKey, stateFrom, stateTo } = options;\r\n  const { lastTryCmd } = prefab.world;\r\n  const { locationAttempt: la, playerAttempt: pa } = lastTryCmd;\r\n  const infiniAction = nlp(term).verbs().toInfinitive().text();\r\n  const pastAction = nlp(term).verbs().toPastTense().text();\r\n\r\n  const actWithName = la.actWith || pa.actWith;\r\n  const actOnThing = la.actOnThings[0] || pa.actOnThings[0];\r\n  const actWithThing = la.actWithThings[0] || pa.actWithThings[0];\r\n  let res = false;\r\n  let help = false;\r\n\r\n  if (!res && !actWithThing && actWithName && actOnThing) {\r\n    res = `There is no '${actWithName}' in the ${location.name} to '${infiniAction}' the ${actOnThing.name} on`;\r\n  }\r\n\r\n  if (!res && !actWithThing && !actWithName && actOnThing) {\r\n    help = true;\r\n    res = `Please specify what you want to '${infiniAction}' the ${actOnThing.name} with using the terminal.`;\r\n  }\r\n\r\n  if (!res && actWithThing.key !== targetKey) {\r\n    res = prefab.sub(`The [name] cannot be ${pastAction} on the ${actWithName}. Please try something else.`);\r\n  }\r\n\r\n  if (!res && actWithThing && [stateFrom, stateTo].includes(actWithThing.stateKey)) {\r\n    actWithThing.stateKey = actWithThing.stateKey === stateTo ? stateFrom : stateTo;\r\n    res = `The ${actWithThing.name} has been ${actWithThing.stateKey} using the ${prefab.name}`;\r\n  }\r\n\r\n  event(prefab, { ...options, actionSource: 'useOn', help, actWithThing }, term);\r\n  return res;\r\n}\r\n\r\n\r\n\r\nexport default {\r\n  useOn,\r\n  event,\r\n  take,\r\n  drop,\r\n  goTo,\r\n  toggleStateKey\r\n}","import Thing from '../Thing';\r\nimport actions from './actions';\r\n\r\nconst defaultActs = [\r\n  { terms: ['open'], act: 'goTo' },\r\n  { terms: ['go through'], act: 'goTo' }\r\n];\r\n\r\nexport { defaultActs as doorActs };\r\n\r\nexport function doorPrefab(thingProps, options, acts = defaultActs) {\r\n  const prefab = thingProps instanceof Thing ? thingProps : new Thing(thingProps);\r\n\r\n  acts.map(a => {\r\n    a.terms.map(term => {\r\n      const action = actions[a.act];\r\n      prefab.addAction(term, () => action(prefab, options, term));\r\n    })\r\n  });\r\n\r\n  return prefab;\r\n}\r\n\r\nexport default doorPrefab;\r\n\r\n\r\n\r\n\r\n","import Thing from '../Thing';\r\nimport actions from './actions';\r\n\r\nconst defaultActs = [\r\n  { terms: ['take', 'pick up'], act: 'take' },\r\n  { terms: ['drop', 'leave', 'discard'], act: 'drop' }\r\n];\r\n\r\nexport { defaultActs as itemActs };\r\n\r\nexport default function itemPrefab(thingProps, options, acts = defaultActs) {\r\n  const prefab = thingProps instanceof Thing ? thingProps : new Thing(thingProps);\r\n\r\n\r\n  acts.map(a => {\r\n    a.terms.map(term => {\r\n      prefab.addAction(term, () => actions[a.act](prefab, options, term));\r\n    })\r\n  });\r\n  return prefab;\r\n}\r\n","import Thing from '../Thing';\r\nimport actions from './actions';\r\nimport { itemActs } from './itemPrefab';\r\n\r\nconst defaultActs = [\r\n  ...itemActs,\r\n  { terms: ['use'], act: 'useOn' }\r\n];\r\n\r\nexport function keyPrefab(thingProps, options, acts = defaultActs) {\r\n  const prefab = thingProps instanceof Thing ? thingProps : new Thing(thingProps);\r\n\r\n  acts.map(a => {\r\n    a.terms.map(term => {\r\n      const action = actions[a.act];\r\n      prefab.addAction(term, () => action(prefab, options, term));\r\n    })\r\n  });\r\n\r\n  return prefab;\r\n}\r\n\r\nexport default keyPrefab;\r\n\r\n\r\n\r\n\r\n","import Thing from '../Thing';\r\nimport actions from './actions';\r\n\r\nconst defaultActs = [\r\n  { terms: ['flip'], act: 'toggleStateKey' },\r\n];\r\n\r\nexport default function lightSwitchPrefab(thingProps, options, acts = defaultActs) {\r\n  const prefab = thingProps instanceof Thing ? thingProps : new Thing(thingProps);\r\n\r\n  if (!['on', 'off'].includes(prefab.statKey)) prefab.stateKey = 'on';\r\n\r\n  prefab.p.descriptions = {\r\n    on: `The [name] is on`,\r\n    off: `The [name] is off`,\r\n    ...thingProps.descriptions\r\n  }\r\n\r\n  prefab.p.details = {\r\n    on: `It's a simple switch, you can probably turn it on and off`,\r\n    off: `It's a simple switch, you can probably turn it on and off`,\r\n    ...prefab.p.descriptions\r\n  }\r\n\r\n  acts.map(a => {\r\n    a.terms.map(term => {\r\n      const ops = { on: 'on', off: 'off' };\r\n      prefab.addAction(term, () => actions[a.act](prefab, ops, term));\r\n    })\r\n  });\r\n  return prefab;\r\n}\r\n","import Thing from '../Thing';\r\nimport actions from './actions';\r\n\r\nconst defaultActs = [{ terms: ['use'], act: 'event' }];\r\n\r\nexport function eventPrefab(thingProps, options, acts = defaultActs) {\r\n  const prefab = thingProps instanceof Thing ? thingProps : new Thing(thingProps);\r\n\r\n  acts.map(a => {\r\n    a.terms.map(term => {\r\n      const action = actions[a.act];\r\n      prefab.addAction(term, () => action(prefab, options, term));\r\n    })\r\n  });\r\n\r\n  return prefab;\r\n}\r\n\r\nexport default eventPrefab;\r\n\r\n\r\n\r\n\r\n","import World from '../tea/World';\r\nimport Thing from '../tea/Thing';\r\n\r\nimport { item, door, key, lightSwitch, eventTrigger } from '../tea/prefabs/index';\r\n\r\n// set up game\r\nconst world = new World().setLexicon({\r\n  open: 'Verb',\r\n  round: 'Verb',\r\n  bones: 'Noun',\r\n  use: 'Verb',\r\n  fat: 'Adjective',\r\n  climb: \"Verb\",\r\n  upstair: \"Adjective\",\r\n  front: \"Adjective\",\r\n  light: 'Noun',\r\n  switch: 'Noun',\r\n  flip: 'Verb',\r\n  apartment: 'Noun'\r\n});\r\nconst player = new Thing({ world, key: 'player', noun: 'player' });\r\n\r\n// locations\r\nconst office = new Thing({ world, key: 'office', noun: 'office', fullname: 'small office', description: \"The [name] is small but sparse, populated only with a set of old, cluttered shelves, a thread-bare computer chair, a nondescript desk with drawers and a waste paper bin. The room itself is dimly illuminated with by sick combination of blue monitor light and a buzzing fluorescent bulb from an old tube light mounted above the desk.\" });\r\nconst hallway = new Thing({ world, key: 'hallway', noun: 'hallway', description: \"The [name] is in ruins. Fallen ceiling tiles rest on the ground near what appears to be blood stains and impossibly large claw gouges in the tile floor and cement walls. A light orange emergency light above the stains illuminates a simple potted plant that acts as a memorial for whatever atrocity occurred there. The walls are scarred and pockmarked both with age and possible combat. Down three steps is a dead-end, cracked walls, rubble and a fallen ceiling clustered together sealing away whatever secrets lay beyond. In the other direction is a stark pale light leading around the corner.\" });\r\nconst sewer = new Thing({ world, key: 'sewer', noun: 'sewer', description: \"Green algae blooms in the still waters below the walkway giving rise to the scent of stagnation and organic matter. The sewers are still, uncharacteristically so. You have an unsettling feeling of wrongness, an almost-memory telling you there should be noise or vibrations. The light streaming from above makes you feel exposed.\" });\r\nconst street = new Thing({ world, key: 'street', noun: 'street', description: \"The street feels desolate. There is no life, no movement, no noise of urban hustle and bustle. Shops, cars and roads stand still, as if frozen in time. Everything feels familiar and yet alien, over it all the apartment door stands like a terrible beacon. The numbers on it '1128' invoking a sense of nostalgia for which you have no memories.\" });\r\nconst apartment = new Thing({ world, key: 'apartment', noun: 'apartment', description: \"Be horrified! It's another module map!! \" });\r\n\r\n// doors\r\nconst officeDoor = door({ world, noun: 'door', fullname: 'metal door', description: 'A heavy looking [name].' }, { goTo: 'hallway' })\r\nconst hallwayDoor = door({ world, noun: 'door', fullname: 'metal door', description: 'A heavy looking [name] behind you.' }, { goTo: 'office' })\r\nconst hallwayCorner = door(\r\n  { world, noun: 'corner', fullname: 'corner', description: 'The [name] at the end of the hall.' },\r\n  { goTo: 'sewer' },\r\n  [{ terms: ['turn'], act: 'goTo' }]\r\n)\r\nconst sewerCorner = door(\r\n  { world, noun: 'corner', fullname: 'corner', description: 'The [name] behind you.' },\r\n  { goTo: 'hallway' },\r\n  [{ terms: ['turn'], act: 'goTo' }]\r\n)\r\nconst sewerExit = door(\r\n  { world, noun: 'ladder', fullname: 'metal ladder', description: 'A [name] is bolted to the wall beside you leading up to an open man hole cover.' },\r\n  { goTo: 'street' },\r\n  [{ terms: ['climb'], act: 'goTo' }]\r\n)\r\nconst streetDoor = door(\r\n  {\r\n    world, noun: 'door', key: 'apartmentDoor', fullname: 'apartment door',\r\n    description: 'An [name] stands overlook the street where you climbed out. There is a sign on the door reading \"1128\"',\r\n    stateKey: 'locked',\r\n    details: {\r\n      unlocked: \"it's not locked\",\r\n      locked: \"It's locked.\"\r\n    }\r\n  },\r\n  { goTo: 'apartment' }\r\n)\r\nconst streetExit = door(\r\n  { world, noun: 'ladder', description: 'There is a manhole beside you with a [name] leading down.' },\r\n  { goTo: 'sewer' },\r\n  [{ terms: ['climb'], act: 'goTo' }]\r\n)\r\nconst apartmentExit = door(\r\n  { world, noun: 'door', fullname: \"front door\", description: 'The [name] is closed behind you.' },\r\n  { goTo: 'street' },\r\n);\r\n\r\n// items\r\nconst computer = eventTrigger({ world, noun: 'computer', description: 'A [name].', detail: \"it's locked\" });\r\nconst bones = item({\r\n  world,\r\n  noun: 'bones',\r\n  descriptions: {\r\n    default: 'A collection of cat-like [name] are scattered in the alley.',\r\n    inventory: 'A collection of cat-like [name].',\r\n    dropped: 'A collection of cat-like [name].',\r\n    horror: 'A collection of infant bones.'\r\n  },\r\n  details: {\r\n    default: 'A collection of small rib, leg bones. On closer inspection some of the bones are snapped, scraped and pitted with indents. Small strands of dark, dessicated viscera cling to them.',\r\n    horror: 'A collection of small rib, leg bones. On closer inspection some of the bones are snapped, scraped and pitted with indents. Small strands of dark, dessicated viscera cling to them. The remains of on an infant child.'\r\n  }\r\n});\r\n\r\n\r\nconst vial = item({ world, noun: 'vial', stateKey: 'hidden', description: 'A small medical vial that glows faintly blue in the dark.', detail: 'The label reads; \"accelerant ANA-f21z, grown in cats. One dose prepared\".' })\r\n\r\n//const ball = item({ world, noun: 'ball', fullname: 'small ball', description: 'A [name].' });\r\nconst hallwayLight = lightSwitch({\r\n  world, noun: 'switch', fullname: 'light switch', descriptions: {\r\n    on: \"A simple [name]; it's on\",\r\n    off: \"A simple [name]; it's off\"\r\n  }\r\n});\r\n\r\nconst smallKey = key({\r\n  world,\r\n  noun: 'key',\r\n  detail: \"An old silver door key with recent scratches; as though it's been removed from a ring recently.\",\r\n  descriptions: {\r\n    default: 'A silver door key sits atop the desk in-front of the keyboard, resting in plain sight as if placed for your attention.',\r\n    inventory: 'A silver door key.',\r\n    dropped: 'The silver door key you left here.'\r\n  }\r\n}, { targetKey: 'apartmentDoor', stateFrom: 'locked', stateTo: 'unlocked' })\r\n\r\n// add locations\r\nworld.addLocation(office);\r\nworld.addLocation(hallway);\r\nworld.addLocation(sewer);\r\nworld.addLocation(street);\r\nworld.addLocation(apartment);\r\nworld.setLocation('office');\r\n\r\n// add doors \r\noffice.addThing(computer)\r\noffice.addThing(officeDoor);\r\nhallway.addThing(hallwayCorner);\r\nhallway.addThing(hallwayDoor);\r\nsewer.addThing(sewerExit);\r\nsewer.addThing(sewerCorner);\r\nstreet.addThing(streetDoor);\r\nstreet.addThing(streetExit);\r\napartment.addThing(apartmentExit)\r\n\r\n// place items\r\nstreet.addThing(bones);\r\noffice.addThing(smallKey);\r\nhallway.addThing(hallwayLight)\r\nhallway.addThing(vial)\r\n\r\n// add characters\r\nworld.addCharacter(player);\r\n\r\n// set player\r\nworld.setPlayer('player');\r\n\r\n\r\n\r\nexport default world;","import { reactive } from 'vue';\r\nimport { atmospheres, effects } from './sound';\r\nimport game from \"./game\";\r\n\r\nconst store = {\r\n  debug: true,\r\n  app: null,\r\n  game: reactive(game),\r\n  state: reactive({\r\n    response: 'Command responses will display here when submitted.',\r\n    more: false,\r\n    view: true,\r\n    lights: {\r\n      hallway: true\r\n    }\r\n  }),\r\n  atmospheres,\r\n  scenes: {\r\n    office: {\r\n      bg: require(\"@/assets/jordan-grimmer-office2.jpg\"),\r\n      atmosphere: 'dark'\r\n    },\r\n    hallway: {\r\n      bg: require(\"@/assets/jordan-grimmer-resirealistic4flat2.jpg\"),\r\n      atmosphere: 'anxiety'\r\n    },\r\n    sewer: {\r\n      bg: require(\"@/assets/jordan-grimmer-sewer3fla23.jpg\"),\r\n      atmosphere: 'anxiety'\r\n    },\r\n    street: {\r\n      bg: require(\"@/assets/jordan-grimmer-untitledress2.jpg\"),\r\n      atmosphere: 'anxiety'\r\n    },\r\n    apartment: {\r\n      bg: require(\"@/assets/jordan-grimmer-untitledresinew3.jpg\"),\r\n      atmosphere: 'anxiety'\r\n    }\r\n  },\r\n  singleCommand(attempt) {\r\n    const { original } = attempt;\r\n    if (original.toLowerCase() === 'view') this.state.view = !this.state.view;\r\n    if (original.toLowerCase() === 'more') this.state.more = !this.state.more;\r\n    if (original.toLowerCase() === 'clear') this.state.response = '';\r\n  },\r\n  playAtmosphere(key = this.game.location.key) {\r\n    const scene = this.scenes[key];\r\n    const current = this.atmospheres.getPlaying();\r\n    const playing = current.length > 0 && current[0];\r\n\r\n    if (playing === scene.atmosphere) return null;\r\n\r\n    if (scene.atmosphere) this.atmospheres.crossFade(scene.atmosphere);\r\n  },\r\n  playSimpleSoundEffects(action, thing) {\r\n    //console.log('sfx', action, thing)\r\n    if (!action || !thing) return;\r\n\r\n    if (action === 'use' && thing.noun === 'key') {\r\n      effects.play('metalClick')\r\n    }\r\n\r\n    if (action === 'flip' && thing.noun === 'switch') {\r\n      effects.play('metalClick')\r\n    }\r\n\r\n    if (['take', 'pick', 'pick up', 'drop', 'leave', 'discard'].includes(action)) {\r\n      effects.play('pickup')\r\n    }\r\n\r\n    if (['open', 'go through'].includes(action) && ['door'].includes(thing.noun) && thing.stateKey !== 'locked') {\r\n      effects.play('door')\r\n    }\r\n\r\n  },\r\n  actionButton({ key, noun, name = false, action = 'help', label = false }) {\r\n    return `<button class=\"button small\" data-key=\"${key}\" data-noun=\"${noun}\" data-name=\"${name}\" data-action=\"${action}\">\r\n    ${label || name}\r\n    </button>`;\r\n  },\r\n  commandButton(word, command) {\r\n    return `<button class=\"button small\" data-command=\"${command}\">\r\n    ${word}\r\n    </button>`;\r\n  },\r\n  replaceActions(thing, res) {\r\n    const { name, actionList } = thing;\r\n    let response = res();\r\n    actionList.map(i => {\r\n      const rgx = new RegExp(\"\\\\b\" + i + \"\\\\b\");\r\n      response = response.replace(rgx, this.commandButton(i, `${i} ${name}`))\r\n    });\r\n    return response;\r\n  },\r\n  replaceThings(actOnThings, res) {\r\n    let response = res();\r\n    actOnThings.map(i => {\r\n      response = response.replace(i.name, this.commandButton(i.name, `help ${i.name}`))\r\n    });\r\n    return response;\r\n  },\r\n}\r\n\r\nexport default store;","import { render } from \"./App.vue?vue&type=template&id=62b9ce00\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=62b9ce00&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"notfound-page text-center full-height\">\r\n    <article>\r\n      <h1 class=\"text-divider title\">404 Not Found</h1>\r\n    </article>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"NotFoundPage\",\r\n  props: [\"thing\"],\r\n  data: () => ({}),\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>\r\n","import { render } from \"./NotFoundPage.vue?vue&type=template&id=ff95b8a0&scoped=true\"\nimport script from \"./NotFoundPage.vue?vue&type=script&lang=js\"\nexport * from \"./NotFoundPage.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-ff95b8a0\"\n\nexport default script","<template>\r\n  <div class=\"intro-page text-center full-height\">\r\n    <article v-on:click=\"handleClick\">\r\n      <header>\r\n        <h1>Lazerus Project</h1>\r\n      </header>\r\n      <img :src=\"logo\" alt=\"amadreason\" />\r\n    </article>\r\n    <div class=\"clue\">click or tap to continue</div>\r\n    <hr />\r\n\r\n    <div>\r\n      <h2 class=\"title\">Types of commands:</h2>\r\n\r\n      <p>\r\n        Commands should be made up of at least one verb and one noun, but can\r\n        have additional words.\r\n      </p>\r\n\r\n      <p>The following command variations are all valid.</p>\r\n\r\n      <pre>open door</pre>\r\n      <pre>go through the metal door</pre>\r\n\r\n      <br /><br />\r\n      <!-- \r\n      <h2>Voice control</h2>\r\n      <p><small><mark>This feature is experimental and somewhat buggy, please do not rely on\r\n        it as the sole method of control.</mark></small></p>\r\n      <p>\r\n        You are able to use voice commands if you have enabled the microphone\r\n        for his app.\r\n      </p>\r\n      <p>\r\n        Voice commands are the same as text commands but 'must' be prefixed with\r\n        the word 'try' to be recognized.        \r\n        <pre>try and open the metal door</pre>\r\n      </p> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"IntroPage\",\r\n  data: () => ({\r\n    logo: require(\"@/assets/amr-logo-mini.svg\"),\r\n  }),\r\n  methods: {\r\n    handleClick() {\r\n      this.$router.push(\"/game\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\nimg {\r\n  max-width: 100px;\r\n}\r\n\r\n.intro {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-evenly;\r\n  flex-flow: column;\r\n  -webkit-animation: fadein 2s; /* Safari, Chrome and Opera > 12.1 */\r\n  -moz-animation: fadein 2s; /* Firefox < 16 */\r\n  -ms-animation: fadein 2s; /* Internet Explorer */\r\n  -o-animation: fadein 2s; /* Opera < 12.1 */\r\n  animation: fadein 2s;\r\n}\r\n\r\n.clue {\r\n  -webkit-animation: fadeinout 2.5s infinite; /* Safari, Chrome and Opera > 12.1 */\r\n  -moz-animation: fadeinout 2.5s infinite; /* Firefox < 16 */\r\n  -ms-animation: fadeinout 2.5s infinite; /* Internet Explorer */\r\n  -o-animation: fadeinout 2.5s infinite; /* Opera < 12.1 */\r\n  animation: fadeinout 2.5s infinite;\r\n}\r\n\r\n@keyframes fadein {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n@keyframes fadeinout {\r\n  0% {\r\n    opacity: 1;\r\n  }\r\n  50% {\r\n    opacity: 0.2;\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./IntroPage.vue?vue&type=template&id=1d392406&scoped=true\"\nimport script from \"./IntroPage.vue?vue&type=script&lang=js\"\nexport * from \"./IntroPage.vue?vue&type=script&lang=js\"\n\nimport \"./IntroPage.vue?vue&type=style&index=0&id=1d392406&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-1d392406\"\n\nexport default script","<template>\r\n  <div class=\"credits-page text-center full-height\">\r\n    <article>\r\n      <h1 class=\"text-divider title\">Credits</h1>\r\n\r\n      <button class=\"button\" @click=\"(e) => $router.go(-1)\">Return</button>\r\n\r\n      <div class=\"credits text-left\">\r\n        <div v-for=\"(v, idx) in credits\" :key=\"idx\" class=\"credit\">\r\n          <pre v-if=\"v.copy\" v-html=\"v.copy\"></pre>\r\n          <pre v-if=\"!v.copy\" class=\"text-left\">\r\n{{v.assetName}} by {{v.creator}}\r\n<span v-if=\"v.link\">Link: <a v-if=\"v.link\" :href=\"v.link\">{{v.link}}</a></span>\r\n<span v-if=\"v.license\">License: <a v-if=\"v.license\" :href=\"v.license\">{{v.license}}</a></span>\r\n        </pre>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"CreditsPage\",\r\n  data: () => ({\r\n    credits: [\r\n      {\r\n        assetName: \"jordan-grimmer-office2.jpg\",\r\n        creator: `Jordan Gimmer`,\r\n        link: \"https://www.jordangrimmer.co.uk/m2qp107ahghlxvl28ff9t8ztmlrbnj\",\r\n        license: \"\",\r\n      },\r\n      {\r\n        assetName: \"resirealistic4flat2.jpg\",\r\n        creator: `Jordan Gimmer`,\r\n        link: \"https://www.artstation.com/artwork/W2AYGE\",\r\n        license: \"\",\r\n      },\r\n      {\r\n        copy: `Very Low Note by Kevin MacLeod\r\nLink: https://incompetech.filmmusic.io/song/4581-very-low-note\r\nLicense: https://filmmusic.io/standard-license`,\r\n      },\r\n      {\r\n        copy: `Anxiety by Kevin MacLeod\r\nLink: https://incompetech.filmmusic.io/song/3374-anxiety\r\nLicense: https://filmmusic.io/standard-license`,\r\n      },\r\n    ],\r\n  }),\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.credits-page {\r\n  background: var(--tea-bg-2);\r\n  min-height: 100vh;\r\n}\r\n.title {\r\n  padding: var(--tea-spacing);\r\n}\r\n.credits {\r\n  margin-top: var(--tea-spacing);\r\n  overflow: initial;\r\n  /* display: flex;\r\n  flex-flow: row wrap;\r\n  justify-content: center; */\r\n}\r\n\r\n.credit {\r\n  background: var(--tea-bg-3);\r\n  margin: calc(var(--tea-spacing) / 2);\r\n  padding: calc(var(--tea-spacing) / 2);\r\n  max-width: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./CreditsPage.vue?vue&type=template&id=b356206e&scoped=true\"\nimport script from \"./CreditsPage.vue?vue&type=script&lang=js\"\nexport * from \"./CreditsPage.vue?vue&type=script&lang=js\"\n\nimport \"./CreditsPage.vue?vue&type=style&index=0&id=b356206e&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-b356206e\"\n\nexport default script","<template>\r\n  <div class=\"menu-page text-center full-height\">\r\n    <article class=\"full-height\">\r\n      <div class=\"titlebar full-width\">\r\n        <div class=\"title-text\">\r\n          <h1 class=\"text-center\">Menu</h1>\r\n        </div>\r\n      </div>\r\n      <ul class=\"unstyled\">\r\n        <li><router-link to=\"/game\">Game</router-link></li>\r\n        <li><router-link to=\"/credits\">Credits</router-link></li>\r\n      </ul>\r\n    </article>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"MenuPage\",\r\n  data: () => ({}),\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n","import { render } from \"./MenuPage.vue?vue&type=template&id=3b19f8e2&scoped=true\"\nimport script from \"./MenuPage.vue?vue&type=script&lang=js\"\nexport * from \"./MenuPage.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-3b19f8e2\"\n\nexport default script","<template>\r\n  <div data-theme=\"tea\" class=\"gameui full-height\">\r\n    <PushDrawer v-bind:open=\"more\" @click=\"clickCommandButton\">\r\n      <template v-slot:left>\r\n        <Scene\r\n          v-bind:view=\"view\"\r\n          :scenes=\"scenes\"\r\n          :makeActionButton=\"makeActionButton\"\r\n          :activeLocation=\"location\"\r\n          :light=\"state.lights[game.location.key]\"\r\n        >\r\n          <div class=\"titlebar full-width\">\r\n            <router-link to=\"/menu\">Menu</router-link>\r\n            <div class=\"title-text\">\r\n              <h1 class=\"text-center\">\r\n                {{ game.location.name }}\r\n              </h1>\r\n            </div>\r\n          </div>\r\n\r\n          <template v-slot:commander>\r\n            <Commander v-on:toggleview=\"toggleView()\">\r\n              <button ref=\"toggleMoreEl\" class=\"button\" @click=\"toggleMore\">\r\n                <i class=\"fas fa-ellipsis-v\" aria-hidden></i> More\r\n              </button>\r\n            </Commander>\r\n          </template>\r\n          <template v-slot:response>\r\n            <Response :response=\"response\" />\r\n          </template>\r\n        </Scene>\r\n      </template>\r\n      <template v-slot:right>\r\n        <div class=\"menu full-height full-width\">\r\n          <div class=\"titlebar\">\r\n            <div class=\"title-text more\">\r\n              <button\r\n                class=\"button\"\r\n                :aria-pressed=\"inventoryOn\"\r\n                @click=\"setMoreOn('inventory')\"\r\n              >\r\n                Inventory\r\n              </button>\r\n              <button\r\n                class=\"button\"\r\n                :aria-pressed=\"locationsOn\"\r\n                @click=\"setMoreOn('locations')\"\r\n              >\r\n                Locations\r\n              </button>\r\n            </div>\r\n            <button ref=\"closeMoreEl\" @click=\"toggleMore\" class=\"button icon\">\r\n              X\r\n            </button>\r\n          </div>\r\n\r\n          <div v-if=\"locationsOn\">\r\n            <ul>\r\n              <li v-for=\"l in locations\" v-bind:key=\"l.key\">\r\n                {{ l.name }}\r\n              </li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div v-if=\"inventoryOn\">\r\n            <ul class=\"unstyled inventory-list\">\r\n              <li v-for=\"t in inventory\" v-bind:key=\"t.key\">\r\n                <strong>{{ t.name }}</strong>\r\n                <hr />\r\n                <p>{{ t.callAction(\"describe\") }}</p>\r\n\r\n                <div class=\"controls\">\r\n                  <button class=\"button small\" :data-command=\"`help ${t.name}`\">\r\n                    actions\r\n                  </button>\r\n                  <button\r\n                    class=\"button small\"\r\n                    :data-command=\"`examine ${t.name}`\"\r\n                  >\r\n                    examine\r\n                  </button>\r\n                  <button\r\n                    v-if=\"t.getAction('drop')\"\r\n                    class=\"button small\"\r\n                    :data-command=\"`drop ${t.name}`\"\r\n                  >\r\n                    drop\r\n                  </button>\r\n                  <button\r\n                    v-if=\"t.getAction('use')\"\r\n                    class=\"button small\"\r\n                    :data-command=\"`use ${t.name}`\"\r\n                  >\r\n                    use\r\n                  </button>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </PushDrawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport store from \"../store.js\";\r\nimport PushDrawer from \"../components/PushDrawer\";\r\nimport Scene from \"../components/Scene\";\r\nimport Commander from \"../components/Commander\";\r\nimport Response from \"../components/Response\";\r\n\r\nexport default {\r\n  name: \"GameUI\",\r\n  components: {\r\n    PushDrawer,\r\n    Scene,\r\n    Commander,\r\n    Response,\r\n  },\r\n  props: [],\r\n  computed: {\r\n    view: () => store.state.view,\r\n    more: () => store.state.more,\r\n    activeUI: () => store.state.activeUI,\r\n    triggerEl: () => store.state.triggerEl,\r\n    response: () => store.state.response,\r\n    scenes: () => store.scenes,\r\n    makeActionButton: () => store.makeActionButton,\r\n    inventoryOn() {\r\n      return this.moreOn === \"inventory\";\r\n    },\r\n    locationsOn() {\r\n      return this.moreOn === \"locations\";\r\n    },\r\n    inventory() {\r\n      return this.$root.inventory;\r\n    },\r\n    locations() {\r\n      return this.$root.locations;\r\n    },\r\n    location() {\r\n      return this.$root.location;\r\n    },\r\n  },\r\n  data: () => ({\r\n    store,\r\n    game: store.game,\r\n    moreOn: \"inventory\",\r\n    state: store.state,\r\n  }),\r\n  watch: {\r\n    more(newVal) {\r\n      this.handleFocus(newVal, this.$refs.closeMoreEl);\r\n      store.state.response = newVal\r\n        ? \"More drawer opened.\"\r\n        : \"More drawer closed\";\r\n    },\r\n    moreOn(newVal) {\r\n      store.state.response = `More drawer set to ${newVal}`;\r\n    },\r\n  },\r\n  methods: {\r\n    handleFocus(newVal, element) {\r\n      if (newVal) {\r\n        store.state.triggerEl = document.activeElement;\r\n        if (element) element.focus();\r\n      }\r\n      if (!newVal) {\r\n        if (store.state.triggerEl) store.state.triggerEl.focus();\r\n        store.state.triggerEl = null;\r\n      }\r\n    },\r\n    toggleMore() {\r\n      store.state.more = !store.state.more;\r\n    },\r\n    setMoreOn(flagName) {\r\n      this.moreOn = flagName;\r\n    },\r\n    toggleView() {\r\n      store.state.view = !store.state.view;\r\n    },\r\n    // handleTab(e, focusables) {\r\n    //   const target = e.target;\r\n    //   const last = focusables[focusables.length - 1];\r\n    //   const first = focusables[0];\r\n    //   const isLast = target === last && !e.shiftKey;\r\n    //   const isFirst = target === first && e.shiftKey;\r\n\r\n    //   if (isFirst || isLast) e.preventDefault();\r\n    //   if (isLast) first.focus();\r\n    //   if (isFirst) last.focus();\r\n    // },\r\n    getFocusables(ref) {\r\n      return this.$refs[ref].getFocusables();\r\n    },\r\n    clickCommandButton(e) {\r\n      const { target } = e;\r\n      const cmd = target.getAttribute(\"data-command\");\r\n      if (!cmd) return;\r\n      this.$root.command(cmd);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style>\r\n.inventory-list > * {\r\n  margin: 0.5rem;\r\n  padding: 0.5rem;\r\n  background: var(--tea-bg-1);\r\n}\r\n</style>\r\n","<template>\r\n  <div\r\n    v-bind:data-transition=\"transition\"\r\n    v-bind:data-open=\"open\"\r\n    v-bind:data-position=\"position\"\r\n    class=\"layout\"\r\n  >\r\n    <div class=\"left-pane\">\r\n      <div class=\"inner\">\r\n        <slot name=\"left\"></slot>\r\n        <slot></slot>\r\n      </div>\r\n    </div>\r\n    <div class=\"right-pane\">\r\n      <slot name=\"right\"></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"PushDrawer\",\r\n  props: {\r\n    position: { type: String, default: \"right\" },\r\n    open: { type: Boolean, default: false },\r\n    transition: { type: Boolean, default: true },\r\n  },\r\n  data: () => ({}),\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style>\r\n.layout {\r\n  display: flex;\r\n  height: 100%;\r\n  width: 100%;\r\n  align-items: stretch;\r\n  overflow: hidden;\r\n}\r\n\r\n.layout > * {\r\n  position: relative;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n}\r\n\r\n.layout[data-transition=\"true\"] > * {\r\n  transition: flex-basis var(--tea-transition, 0.5s ease),\r\n    width var(--tea-transition, 0.5s ease),\r\n    box-shadow var(--tea-transition, 0.5s ease);\r\n}\r\n\r\n.layout .inner {\r\n  height: 100%;\r\n  min-height: auto;\r\n  overflow-x: hidden;\r\n}\r\n\r\n.layout .right-pane {\r\n  overflow-x: hidden;\r\n}\r\n\r\n/* Positions */\r\n.layout[data-position=\"right\"] {\r\n  flex-flow: row nowrap;\r\n}\r\n.layout[data-position=\"left\"] {\r\n  flex-flow: row-reverse nowrap;\r\n}\r\n\r\n.layout[data-position=\"right\"] .inner,\r\n.layout[data-position=\"left\"] .inner {\r\n  min-width: var(--pushdrawer-minwidth, 200px);\r\n  height: 100%;\r\n}\r\n.layout[data-position=\"right\"] .left-pane,\r\n.layout[data-position=\"left\"] .left-panee {\r\n  flex: 2 0;\r\n}\r\n.layout[data-position=\"right\"] .right-pane,\r\n.layout[data-position=\"left\"] .right-pane {\r\n  width: 0;\r\n}\r\n.layout[data-open=\"true\"][data-position=\"right\"] .right-pane,\r\n.layout[data-open=\"true\"][data-position=\"left\"] .right-pane {\r\n  width: var(--pushdrawer-maxwidth, 100%);\r\n}\r\n\r\n@media (min-width: 600px) {\r\n  :root {\r\n    --pushdrawer-maxwidth: 50%;\r\n  }\r\n}\r\n\r\n@media (min-width: 1000px) {\r\n  :root {\r\n    --pushdrawer-maxwidth: 30%;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./PushDrawer.vue?vue&type=template&id=4c0a6c10\"\nimport script from \"./PushDrawer.vue?vue&type=script&lang=js\"\nexport * from \"./PushDrawer.vue?vue&type=script&lang=js\"\n\nimport \"./PushDrawer.vue?vue&type=style&index=0&id=4c0a6c10&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n  <div v-bind:data-view=\"view\" class=\"scene\">\r\n    <slot></slot>\r\n    <div class=\"description\">\r\n      <div\r\n        class=\"bg\"\r\n        ref=\"bg\"\r\n        role=\"presentation\"\r\n        aria-hidden\r\n        :data-light=\"light\"\r\n        :style=\"{\r\n          backgroundImage: `url(${scenes[activeLocation.key].bg})`,\r\n        }\"\r\n      ></div>\r\n      <div class=\"corpus box\">\r\n        {{ activeLocation.description }}\r\n      </div>\r\n      <div class=\"items box\">\r\n        <ul class=\"unstyled\">\r\n          <!-- $root.location.things -->\r\n          <li\r\n            v-for=\"thing in listThings()\"\r\n            v-bind:key=\"`${thing.key}-${thing.stateKey}`\"\r\n          >\r\n            <!-- <div v-html=\"rawHtml\"></div> -->\r\n            <Description v-bind:thing=\"thing\" />\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <div class=\"commander\">\r\n      <div class=\"box\">\r\n        <slot name=\"commander\"></slot>\r\n      </div>\r\n    </div>\r\n    <div class=\"response\">\r\n      <div class=\"box\">\r\n        <slot name=\"response\"></slot>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Description from \"./Description\";\r\n\r\nexport default {\r\n  name: \"Scene\",\r\n  components: {\r\n    Description,\r\n  },\r\n  props: {\r\n    view: { type: Boolean, default: true },\r\n    scenes: { type: Object, default: undefined },\r\n    activeLocation: { type: Object, default: undefined },\r\n    light: { type: Boolean, default: true },\r\n  },\r\n\r\n  computed: {\r\n    // things: function () {\r\n    //   const allThings = this.$root.location.things;\r\n    //   const unhiddenThings = this.$root.location.things.filter(\r\n    //     (i) => i.stateKey !== \"hidden\"\r\n    //   );\r\n    //   return this.light ? unhiddenThings : allThings;\r\n    // },\r\n    // light: function () {\r\n    //   const things = this.activeLocation.things;\r\n    //   const light = things.find((i) => i.noun === \"switch\");\r\n    //   return light;\r\n    // },\r\n  },\r\n  data: () => ({}),\r\n  methods: {\r\n    listThings() {\r\n      const allThings = this.$root.location.things;\r\n      const unhiddenThings = this.$root.location.things.filter(\r\n        (i) => i.stateKey !== \"hidden\"\r\n      );\r\n      return this.light ? unhiddenThings : allThings;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.scene {\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-flow: column;\r\n  align-items: center;\r\n  background-color: var(--tea-bg-3);\r\n  --view-transition: all 0.5s linear;\r\n}\r\n\r\n.scene > * {\r\n  width: 100%;\r\n}\r\n\r\n.box {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n}\r\n\r\n.response .box {\r\n  height: 100%;\r\n}\r\n\r\n.description {\r\n  overflow-y: auto;\r\n  justify-content: center;\r\n  flex-flow: column;\r\n  display: flex;\r\n  align-items: center;\r\n  position: relative;\r\n  background: var(--tea-bg-3);\r\n  overflow: hidden;\r\n  height: 100%;\r\n}\r\n\r\n.description .bg {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  max-width: 100%;\r\n  background-size: cover;\r\n  background-position: center center;\r\n  background-repeat: no-repeat;\r\n  transition: var(--view-transition);\r\n  box-shadow: inset 0 0 10px #000000;\r\n}\r\n\r\n.description .bg[data-light=\"false\"] {\r\n  filter: brightness(5%) grayscale(100%);\r\n}\r\n\r\n.description .corpus {\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.description .corpus,\r\n.description .items:not(:empty) {\r\n  background-color: rgb(17 21 24 / 85%);\r\n  box-shadow: var(--tea-shadow);\r\n  border: 1px solid var(--tea-bg-3);\r\n  max-height: 50%;\r\n  display: flex;\r\n  flex-flow: column;\r\n  overflow-y: auto;\r\n  z-index: 2;\r\n  position: relative;\r\n  border-radius: var(--tea-radius);\r\n  padding: 0.5rem 1rem;\r\n  transition: var(--view-transition);\r\n  opacity: 1;\r\n}\r\n\r\n.description .items:not(:empty) li {\r\n  margin: 0 0;\r\n  padding: 0.5rem 0;\r\n}\r\n\r\n.scene[data-view=\"false\"] .description .corpus,\r\n.scene[data-view=\"false\"] .description .items {\r\n  opacity: 0;\r\n}\r\n\r\n.commander {\r\n  padding: 0.5rem;\r\n}\r\n\r\n.response {\r\n  height: 150px;\r\n  overflow-y: auto;\r\n  /* border: 1px solid var(--tea-bg-3); */\r\n  background: var(--tea-bg-1);\r\n}\r\n\r\n@media (min-width: 801px) {\r\n  .description[data-v-55d9de8c] {\r\n    flex-basis: 100%;\r\n    padding: var(--tea-spacing);\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div v-html=\"rawHtml\"></div>\r\n</template>\r\n\r\n<script>\r\nimport store from \"../store\";\r\nexport default {\r\n  name: \"Description\",\r\n  props: [\"thing\"],\r\n  computed: {\r\n    rawHtml() {\r\n      let description = this.thing.callAction(\"describe\");\r\n      const button = store.commandButton(\r\n        this.thing.name,\r\n        `help ${this.thing.name}`\r\n      );\r\n      description = description.replace(this.thing.name, button);\r\n      return description;\r\n    },\r\n  },\r\n  data: () => ({}),\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.response {\r\n  padding: 0.5rem;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n}\r\n</style>\r\n","import { render } from \"./Description.vue?vue&type=template&id=61dd20ae&scoped=true\"\nimport script from \"./Description.vue?vue&type=script&lang=js\"\nexport * from \"./Description.vue?vue&type=script&lang=js\"\n\nimport \"./Description.vue?vue&type=style&index=0&id=61dd20ae&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-61dd20ae\"\n\nexport default script","import { render } from \"./Scene.vue?vue&type=template&id=b50950a4&scoped=true\"\nimport script from \"./Scene.vue?vue&type=script&lang=js\"\nexport * from \"./Scene.vue?vue&type=script&lang=js\"\n\nimport \"./Scene.vue?vue&type=style&index=0&id=b50950a4&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-b50950a4\"\n\nexport default script","<template>\r\n  <form @submit.prevent=\"cmd\" class=\"commander\">\r\n    <div class=\"cmd-controls\">\r\n      <input\r\n        ref=\"cmdinput\"\r\n        autocomplete=\"on\"\r\n        class=\"input\"\r\n        @keyup.ctrl.c=\"clearResponse\"\r\n        v-model=\"inputCommand\"\r\n        id=\"cmd\"\r\n        type=\"text\"\r\n        aria-label=\"command\"\r\n      />\r\n      <button class=\"button\" type=\"submit\">Submit</button>\r\n    </div>\r\n\r\n    <div class=\"controls\">\r\n      <button\r\n        @click=\"$emit('toggleview', e)\"\r\n        role=\"presentation\"\r\n        class=\"button icon-button desc\"\r\n      >\r\n        View\r\n      </button>\r\n      <slot></slot>\r\n    </div>\r\n  </form>\r\n  <!-- <div class=\"commander-input\">\r\n    <form @submit.prevent=\"cmd\">\r\n      <label for=\"cmd\">Command:</label>\r\n      <div class=\"commander-inputgroup\">\r\n        <input\r\n          autocomplete=\"on\"\r\n          class=\"input\"\r\n          @keyup.ctrl.c=\"clearResponse\"\r\n          v-model=\"inputCommand\"\r\n          id=\"cmd\"\r\n          type=\"text\"\r\n        />\r\n        <button class=\"button\" type=\"submit\">Submit</button>\r\n      </div>\r\n    </form>\r\n    <div class=\"commander-controls\">\r\n      <button\r\n        @click=\"$emit('toggleview', e)\"\r\n        role=\"presentation\"\r\n        class=\"button icon-button desc\"\r\n      >\r\n        View\r\n      </button>\r\n      <slot></slot>\r\n    </div>\r\n  </div> -->\r\n</template>\r\n\r\n<script>\r\nimport store from \"../store\";\r\nexport default {\r\n  name: \"Commander\",\r\n  emits: [\"command\", \"toggleview\"],\r\n  props: {},\r\n  computed: {},\r\n  data: () => ({\r\n    inputCommand: \"\",\r\n  }),\r\n  methods: {\r\n    cmd() {\r\n      this.$root.command(this.inputCommand);\r\n      this.inputCommand = \"\";\r\n    },\r\n    clearResponse() {\r\n      store.state.response = \"\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style>\r\n.commander {\r\n  --sp: 0.2rem;\r\n}\r\n\r\n.cmd-controls {\r\n  margin-bottom: calc(var(--sp) * 2);\r\n}\r\n\r\n.cmd-controls,\r\n.controls {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: baseline;\r\n}\r\n\r\n.cmd-controls input {\r\n  flex-basis: 100%;\r\n}\r\n\r\n.controls button {\r\n  --sp: 0.2rem;\r\n  flex-basis: calc(100% - calc(var(--sp) * 2));\r\n}\r\n\r\n.controls button:not(:first-child) {\r\n  margin-left: var(--sp);\r\n}\r\n\r\n.controls button:not(:last-child) {\r\n  margin-right: var(--sp);\r\n}\r\n\r\n@media (min-width: 480px) {\r\n  .commander {\r\n    display: flex;\r\n  }\r\n\r\n  .cmd-controls {\r\n    flex-basis: 100%;\r\n    margin-right: calc(var(--sp) * 2);\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Commander.vue?vue&type=template&id=056bc533\"\nimport script from \"./Commander.vue?vue&type=script&lang=js\"\nexport * from \"./Commander.vue?vue&type=script&lang=js\"\n\nimport \"./Commander.vue?vue&type=style&index=0&id=056bc533&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n  <div\r\n    class=\"response\"\r\n    aria-live=\"assertive\"\r\n    aria-atomic=\"true\"\r\n    v-html=\"response\"\r\n  ></div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Response\",\r\n  props: [\"response\"],\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.response {\r\n  padding: 0.5rem;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n}\r\n</style>\r\n","import { render } from \"./Response.vue?vue&type=template&id=0da8b47a&scoped=true\"\nimport script from \"./Response.vue?vue&type=script&lang=js\"\nexport * from \"./Response.vue?vue&type=script&lang=js\"\n\nimport \"./Response.vue?vue&type=style&index=0&id=0da8b47a&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-0da8b47a\"\n\nexport default script","import { render } from \"./GamePage.vue?vue&type=template&id=507410d1\"\nimport script from \"./GamePage.vue?vue&type=script&lang=js\"\nexport * from \"./GamePage.vue?vue&type=script&lang=js\"\n\nimport \"./GamePage.vue?vue&type=style&index=0&id=507410d1&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"computer-page text-center full-height\" v-on:click=\"handleClick\">\r\n    <div class=\"titlebar full-width\">\r\n      <router-link to=\"/game\">Back</router-link>\r\n      <div class=\"title-text\">\r\n        <h1 class=\"text-center\">Computer</h1>\r\n      </div>\r\n    </div>\r\n    <div class=\"monitor full-height\">\r\n      <p>I'm still coding this bit so don;t bother with it.</p>\r\n      <p>ðŸ˜œ</p>\r\n      <label>Password: </label>\r\n      <input type=\"password\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ComputerPage\",\r\n  data: () => ({}),\r\n  methods: {},\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style>\r\n.monitor {\r\n  background-color: #333;\r\n  color: #00ff00;\r\n  font-family: \"andale mono\", /* MS WebFont */ \"monotype.com\",\r\n    /* MS WebFont, former name */ monaco,\r\n    /* MacOS */ /* Fallback options */ \"courier new\",\r\n    /* Windows, MacOS */ courier, /* Unix+X, MacOS */ monospace;\r\n  padding: 10px;\r\n  display: block;\r\n  position: relative;\r\n  width: 100%;\r\n  max-width: 600px;\r\n  min-height: 300px;\r\n  background-color: #111;\r\n  overflow: hidden;\r\n  margin: 0 auto;\r\n  border-radius: 5px;\r\n}\r\n\r\n.monitor input {\r\n  background: transparent;\r\n  color: #00ff00;\r\n}\r\n</style>\r\n","import { render } from \"./ComputerPage.vue?vue&type=template&id=55f3e1be\"\nimport script from \"./ComputerPage.vue?vue&type=script&lang=js\"\nexport * from \"./ComputerPage.vue?vue&type=script&lang=js\"\n\nimport \"./ComputerPage.vue?vue&type=style&index=0&id=55f3e1be&lang=css\"\nscript.render = render\n\nexport default script","import { createApp } from \"vue\";\r\nimport { createWebHistory, createRouter } from \"vue-router\";\r\nimport \"./css/theme/index.css\";\r\nimport \"./css/theme/helpers.css\";\r\nimport \"./css/theme/themes/tea.css\";\r\nimport \"./css/style.css\"\r\n\r\nimport App from \"./App.vue\";\r\nimport NotFoundPage from './pages/NotFoundPage';\r\nimport IntroPage from './pages/IntroPage';\r\nimport CreditsPage from './pages/CreditsPage';\r\nimport MenuPage from './pages/MenuPage';\r\nimport GamePage from './pages/GamePage';\r\nimport ComputerPage from './pages/ComputerPage'\r\n\r\n// import UIGame from \"./components/UIGame.vue\";\r\n// import UICredits from \"./components/UICredits.vue\";\r\n// import UINotFound from \"./components/UINotFound.vue\";\r\n// import UIMenu from \"./components/UIMenu.vue\";\r\n// import UIIntro from \"./components/UIIntro.vue\";\r\n\r\n// const routes = [\r\n//   { path: '/:pathMatch(.*)*', name: 'NotFound', component: UINotFound },\r\n//   { path: '', name: 'home', component: UIIntro },\r\n//   { path: '/game', name: 'game', component: UIGame },\r\n//   { path: '/credits', name: 'credits', component: UICredits },\r\n//   { path: '/menu', name: 'menu', component: UIMenu }\r\n// ];\r\n\r\n\r\n\r\n\r\n\r\nconst routes = [\r\n  { path: '/:pathMatch(.*)*', name: 'NotFoundPage', component: NotFoundPage },\r\n  { path: '', name: 'home', component: IntroPage },\r\n  { path: '/credits', name: 'credits', component: CreditsPage },\r\n  { path: '/menu', name: 'menu', component: MenuPage },\r\n  { path: '/game', name: 'game', component: GamePage },\r\n  { path: '/computer', name: 'computer', component: ComputerPage },\r\n];\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(),\r\n  routes\r\n});\r\n\r\n\r\ncreateApp(App).use(router).mount(\"#app\");\r\n","module.exports = __webpack_public_path__ + \"media/metalClick.6dc5c586.ogg\";","module.exports = __webpack_public_path__ + \"img/jordan-grimmer-office2.d6df4a43.jpg\";","module.exports = __webpack_public_path__ + \"img/amr-logo-mini.46b17465.svg\";","module.exports = __webpack_public_path__ + \"img/jordan-grimmer-resirealistic4flat2.a202ae15.jpg\";","module.exports = __webpack_public_path__ + \"media/anxiety-by-kevin-macleod-from-filmmusic-io.6b6bbfbc.mp3\";","module.exports = __webpack_public_path__ + \"media/doorClose_2.393846ff.ogg\";","module.exports = __webpack_public_path__ + \"img/jordan-grimmer-untitledresinew3.67a872db.jpg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Response.vue?vue&type=style&index=0&id=0da8b47a&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/jordan-grimmer-untitledress2.f4210e27.jpg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ComputerPage.vue?vue&type=style&index=0&id=55f3e1be&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./GamePage.vue?vue&type=style&index=0&id=507410d1&lang=css\"","module.exports = __webpack_public_path__ + \"media/handleSmallLeather2.a8c86688.ogg\";"],"sourceRoot":""}